<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tic-Tac-Toe (Spring Boot)</title>
  <style>
    body { font-family: sans-serif; display:flex; flex-direction:column; align-items:center; }
    .board { display:grid; grid-template-columns:repeat(3,80px); gap:8px; margin-top:20px; }
    .cell { width:80px; height:80px; display:flex; align-items:center; justify-content:center; font-size:32px; border:1px solid #333; cursor:pointer; }
    .status { margin-top:10px; }
  </style>
</head>
<body>
  <h1>Tic-Tac-Toe (Spring Boot)</h1>
  <div class="board" id="board"></div>
  <div class="status" id="status">Player: <span id="player">X</span></div>
  <button id="reset">Reset</button>

<script>
let board = ["","","","","","","","",""];
let player = "X";

const boardEl = document.getElementById('board');
const statusEl = document.getElementById('status');
const playerEl = document.getElementById('player');
const resetBtn = document.getElementById('reset');

function draw() {
  boardEl.innerHTML = "";
  board.forEach((c, i) => {
    const div = document.createElement('div');
    div.className = 'cell';
    div.textContent = c;
    div.onclick = () => handleClick(i);
    boardEl.appendChild(div);
  });
}
async function handleClick(pos) {
  if (board[pos]) return;
  const res = await fetch('/api/move', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ board, player, pos })
  });
  const data = await res.json();
  if (data.error) return alert(data.error);
  board = data.board;
  if (data.winner) {
    statusEl.textContent = data.winner === 'draw' ? 'Draw!' : `Winner: ${data.winner}`;
  } else {
    player = player === 'X' ? 'O' : 'X';
    playerEl.textContent = player;
    statusEl.textContent = 'Player: ' + player;
  }
  draw();
}
resetBtn.onclick = () => {
  board = ["","","","","","","","",""]; player = "X";
  playerEl.textContent = player; statusEl.textContent = 'Player: ' + player; draw();
}
draw();
</script>
</body>
</html>
